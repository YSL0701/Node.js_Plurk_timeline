(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bf09471"],{"47c1":function(t,e,n){},5648:function(t,e,n){"use strict";var i=n("47c1"),c=n.n(i);c.a},"87e8":function(t,e,n){"use strict";var i=n("ed4f"),c=n.n(i);c.a},ade6:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"page"}},[n("div",{staticClass:"main"},[n("div",{staticClass:"data"},[n("div",{staticClass:"input_area"},[n("div",{staticClass:"account"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.account,expression:"account",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"帳號"},domProps:{value:t.account},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getTimeline(e):null},input:function(e){e.target.composing||(t.account=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),n("div",{staticClass:"addToAccountList",attrs:{title:"加入常用帳號列表"},on:{click:t.addToAccountList}},[t._v("+")])]),n("div",{staticClass:"accountList"},[n("div",{staticClass:"openList",class:{isOpen:t.accountListOpen&&t.accountList.length>0},on:{click:t.openAccountList}},[n("div",{staticClass:"text"},[t._v("帳號列表")]),n("div",{staticClass:"arrow",class:{arrowDown:t.accountListOpen}})]),n("accountList",{directives:[{name:"show",rawName:"v-show",value:t.accountListOpen,expression:"accountListOpen"}],attrs:{"current-account":t.account},on:{"update:currentAccount":function(e){t.account=e},closeAccountList:function(e){t.accountListOpen=!1}}})],1),n("div",{staticClass:"date"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],attrs:{type:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),n("div",{staticClass:"goTimeline",on:{click:t.getTimeline}},[t.isLoading?n("img",{attrs:{src:"/loading.gif"}}):n("span",[t._v("啟動時光機!")])])]),t.timeline.length>0?n("div",{staticClass:"plurkContentGroup"},[t._l(t.timeline,function(e,i){return n("plurkContent",{key:i,staticClass:"plurkContent",attrs:{plurk:e,"display-name":t.displayName,account:t.currentAccount,avatar:t.targetAvatar,"prev-plurk":t.timeline[i-1]}})}),this.timeline.length>0&&t.canGetMore?n("div",{staticClass:"more",on:{click:t.getMoreTimeline}},[t.moreLoading?n("img",{attrs:{src:"/loading.gif"}}):n("span",[t._v("看更多")])]):t._e()],2):t._e(),t.error?n("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()])])},c=[];n("28a5");function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){return a(t)||o(t)||s()}n("cadf"),n("551c"),n("097d");var u=n("0b0f"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"list"}},[n("div",{staticClass:"list"},t._l(t.accountList,function(e,i){return n("div",{key:e,staticClass:"accountText",on:{click:function(n){t.useAccount(e)}}},[t._v(t._s(e)+"\n      "),n("div",{staticClass:"removeAccount",on:{click:function(e){e.stopPropagation(),t.removeAccount(i)}}},[n("div",{staticClass:"remove"})])])}))])},d=[],m={props:{currentAccount:{type:String}},methods:{useAccount:function(t){this.$emit("update:currentAccount",t)},removeAccount:function(t){this.$store.commit("removeAccount",t),0===this.accountList.length&&this.$emit("closeAccountList")}},computed:{accountList:function(){return this.$store.state.accountList.accountList}},created:function(){localStorage.getItem("accountList")&&this.$store.commit("setAccountList",JSON.parse(localStorage.getItem("accountList")))}},p=m,h=(n("5648"),n("2877")),f=Object(h["a"])(p,l,d,!1,null,"1fd9890e",null);f.options.__file="accountList.vue";var g=f.exports,v={data:function(){return{account:"",date:"",timeline:[],isLoading:!1,error:"",displayName:"",moreLoading:!1,currentAccount:"",targetAvatar:"",canGetMore:!0,accountListOpen:!1}},methods:{getTimeline:function(){var t=this;this.timeline=[],this.error="",this.canGetMore=!0,this.account&&!this.isLoading&&(this.isLoading=!0,this.$axios.post("https://plurk-timeline.herokuapp.com/getTimeline",{account:this.account,offset:this.isoDate}).then(function(e){"success"===e.data.success?(t.timeline=e.data.plurks,t.displayName=e.data.displayName,t.currentAccount=e.data.account,t.targetAvatar=e.data.avatar,t.timeline.length<1&&(t.error="在這時間之前沒有噗文喔")):t.error=e.data.message,t.isLoading=!1}))},getMoreTimeline:function(){var t=this,e=new Date(this.timeline[this.timeline.length-1].posted).toISOString();this.currentAccount&&!this.moreLoading&&(this.moreLoading=!0,this.$axios.post("https://plurk-timeline.herokuapp.com/getTimeline",{account:this.currentAccount,offset:e}).then(function(e){"success"===e.data.success?(t.timeline=r(t.timeline).concat(r(e.data.plurks)),0===e.data.plurks.length&&(t.canGetMore=!1,t.error="已經沒有更多的噗文囉")):t.error=e.message,t.moreLoading=!1}).catch(function(t){console.log("錯誤:",t)}))},clearError:function(){this.error=""},addToAccountList:function(){var t=this;if(this.accountList.length>0){if(this.accountList.some(function(e){return e===t.account}))return;this.$store.commit("addToAccountList",this.account)}else this.$store.commit("addToAccountList",this.account);localStorage.setItem("accountList",JSON.stringify(this.accountList))},openAccountList:function(){this.accountList.length>0&&(this.accountListOpen=!this.accountListOpen)}},computed:{isoDate:function(){return this.date?new Date("".concat(this.date,"T23:59:59")).toISOString():(new Date).toISOString()},accountList:function(){return this.$store.state.accountList.accountList}},components:{plurkContent:u["a"],accountList:g},created:function(){this.date=(new Date).toLocaleDateString().split("/").map(function(t){return 1*t<10&&(t="0"+t),t}).join("-")}},L=v,A=(n("87e8"),Object(h["a"])(L,i,c,!1,null,"0f019046",null));A.options.__file="timeline.vue";e["default"]=A.exports},ed4f:function(t,e,n){}}]);
//# sourceMappingURL=chunk-3bf09471.fb9fe0cc.js.map