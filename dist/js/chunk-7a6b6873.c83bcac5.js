(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a6b6873"],{"0982":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"response_content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.responseData.avatar,alt:"avatar"}})]),n("div",{staticClass:"article"},[n("div",{staticClass:"displayName"},[n("a",{class:{owner:t.responseData.account===t.ownerAccount},style:t.nameColor,attrs:{href:t.accountLink,target:"_blank"}},[t._v(t._s(t.responseData.displayName))])]),n("div",{staticClass:"text_content",domProps:{innerHTML:t._s(t.responseData.content)}})])]),n("div",{staticClass:"date"},[t._v(t._s(t.postedDate))])])},a=[],i={props:["responseData","ownerAccount"],computed:{accountLink:function(){return"https://www.plurk.com/".concat(this.responseData.account)},postedDate:function(){return new Date(this.responseData.posted).toLocaleString()},nameColor:function(){return this.responseData.nameColor?{color:"#".concat(this.responseData.nameColor)}:void 0}}},o=i,c=(n("eee5"),n("2877")),r=Object(c["a"])(o,s,a,!1,null,"c44a0ada",null);r.options.__file="responseCard.vue";e["a"]=r.exports},"0bfb":function(t,e,n){"use strict";var s=n("cb7c");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1953:function(t,e,n){},"214f":function(t,e,n){"use strict";var s=n("32e9"),a=n("2aba"),i=n("79e5"),o=n("be13"),c=n("2b4c");t.exports=function(t,e,n){var r=c(t),u=n(o,r,""[t]),l=u[0],p=u[1];i(function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})&&(a(String.prototype,t,l),s(RegExp.prototype,r,2==e?function(t,e){return p.call(t,this,e)}:function(t){return p.call(t,this)}))}},"28a5":function(t,e,n){n("214f")("split",2,function(t,e,s){"use strict";var a=n("aae3"),i=s,o=[].push,c="split",r="length",u="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[r]||2!="ab"[c](/(?:ab)*/)[r]||4!="."[c](/(.?)(.?)/)[r]||"."[c](/()()/)[r]>1||""[c](/.?/)[r]){var l=void 0===/()??/.exec("")[1];s=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!a(t))return i.call(n,t,e);var s,c,p,d,v,h=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=void 0===e?4294967295:e>>>0,k=new RegExp(t.source,m+"g");l||(s=new RegExp("^"+k.source+"$(?!\\s)",m));while(c=k.exec(n)){if(p=c.index+c[0][r],p>f&&(h.push(n.slice(f,c.index)),!l&&c[r]>1&&c[0].replace(s,function(){for(v=1;v<arguments[r]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[r]>1&&c.index<n[r]&&o.apply(h,c.slice(1)),d=c[0][r],f=p,h[r]>=g))break;k[u]===c.index&&k[u]++}return f===n[r]?!d&&k.test("")||h.push(""):h.push(n.slice(f)),h[r]>g?h.slice(0,g):h}}else"0"[c](void 0,0)[r]&&(s=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(n,a){var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i,a):s.call(String(i),n,a)},s]})},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"6b54":function(t,e,n){"use strict";n("3846");var s=n("cb7c"),a=n("0bfb"),i=n("9e1e"),o="toString",c=/./[o],r=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?r(function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?a.call(t):void 0)}):c.name!=o&&r(function(){return c.call(this)})},aae3:function(t,e,n){var s=n("d3f4"),a=n("2d95"),i=n("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==a(t))}},ac93:function(t,e,n){"use strict";var s=n("fc1a"),a=n.n(s);a.a},ade6:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"page"}},[n("div",{staticClass:"main"},[n("div",{staticClass:"data"},[n("div",{staticClass:"input_area"},[n("div",{staticClass:"account"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text",placeholder:"帳號"},domProps:{value:t.account},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getTimeline(e):null},input:function(e){e.target.composing||(t.account=e.target.value)}}}),n("div",{staticClass:"addToAccountList",attrs:{title:"加入常用帳號列表"},on:{click:t.addToAccountList}},[t._v("+")])]),n("div",{staticClass:"accountList"},[n("div",{staticClass:"openList",class:{isOpen:t.accountListOpen&&t.accountList.length>0},on:{click:t.openAccountList}},[n("div",{staticClass:"text"},[t._v("帳號列表")]),n("div",{staticClass:"arrow"})]),n("accountList",{directives:[{name:"show",rawName:"v-show",value:t.accountListOpen,expression:"accountListOpen"}],attrs:{"current-account":t.account},on:{"update:currentAccount":function(e){t.account=e},closeAccountList:function(e){t.accountListOpen=!1}}})],1),n("div",{staticClass:"date"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],attrs:{type:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),n("div",{staticClass:"goTimeline",on:{click:t.getTimeline}},[t.isLoading?n("img",{attrs:{src:"/loading.gif"}}):n("span",[t._v("啟動時光機!")])])]),t.timeline.length>0?n("div",{staticClass:"plurkContentGroup"},[t._l(t.timeline,function(e,s){return n("plurkContent",{key:s,staticClass:"plurkContent",attrs:{plurk:e,"display-name":t.displayName,account:t.currentAccount,avatar:t.targetAvatar,"prev-plurk":t.timeline[s-1]}})}),this.timeline.length>0&&t.canGetMore?n("div",{staticClass:"more",on:{click:t.getMoreTimeline}},[t.moreLoading?n("img",{attrs:{src:"/loading.gif"}}):n("span",[t._v("看更多")])]):t._e()],2):t._e(),t.error?n("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()])])},a=[];n("28a5");function i(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){return i(t)||o(t)||c()}var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"content"}},[n("div",{staticClass:"content_card",class:{hasTimeTag:t.timeTag},on:{click:t.goPlurkPage}},[t.timeTag?n("div",{staticClass:"timeTag"},[t._v(t._s(t.timeTag)+"\n    ")]):t._e(),n("div",{staticClass:"main_content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.avatar,alt:"avatar"}})]),n("div",{staticClass:"article"},[n("div",{staticClass:"displayName"},[n("a",{attrs:{href:t.accountLink,target:"_blank"}},[t._v(t._s(t.displayName))])]),n("div",{staticClass:"text_content",domProps:{innerHTML:t._s(t.plurk.content)}})])]),n("div",{staticClass:"date"},[t._v(t._s(t.postedDate))]),n("div",{staticClass:"info"},[n("div",{staticClass:"response_count",attrs:{title:t.responseOpenTitle},on:{click:function(e){return e.stopPropagation(),t.getResponse(e)}}},[n("i",{staticClass:"fas fa-comments"}),n("div",{staticClass:"count"},[t._v("\n            "+t._s(t.plurk.response_count)+"\n          ")])]),n("a",{staticClass:"link",attrs:{href:t.originLink,target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[n("i",{staticClass:"fas fa-external-link-alt"}),n("div",{staticClass:"text"},[t._v("連結")])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.responseOpen,expression:"responseOpen"}],staticClass:"response_group"},[t._l(t.responses,function(e){return n("responseCard",{directives:[{name:"show",rawName:"v-show",value:!t.responseLoading,expression:"!responseLoading"}],key:e.posted,attrs:{"response-data":e,ownerAccount:t.account}})}),t.responseLoading?n("div",{staticClass:"loading"},[n("img",{attrs:{src:"/ball-loading.gif"}})]):t._e()],2),n("div",{directives:[{name:"show",rawName:"v-show",value:t.responseOpen&&!t.responseLoading,expression:"responseOpen && !responseLoading"}],staticClass:"close",on:{click:function(e){t.openCloseResponse(!1)}}},[t._v("收起回覆")])])])},l=[],p=(n("6b54"),n("0982")),d={props:["plurk","displayName","account","avatar","prevPlurk"],data:function(){return{responseLoading:!1,responseOpen:!1,responses:[]}},methods:{getResponse:function(){var t=this;!this.responses.length>0&&this.plurk.response_count>0?(this.responseOpen=!0,this.responseLoading=!0,this.$axios.post("https://plurk-timeline.herokuapp.com/response",{plurk_id:this.plurk.plurk_id}).then(function(e){t.responses=e.data.response,t.responseLoading=!1})):this.responses.length>0&&this.plurk.response_count>0&&(this.responseOpen=!this.responseOpen)},openCloseResponse:function(t){this.responseOpen=t},goPlurkPage:function(){var t={plurk:this.plurk,displayName:this.displayName,account:this.account,avatar:this.avatar};this.$store.commit("setPlurkPageData",t),localStorage.setItem("plurk_id",this.plurk.plurk_id.toString(36)),localStorage.setItem("ownerData",JSON.stringify(t)),this.$router.push("/plurk/".concat(this.plurk.plurk_id.toString(36)))}},computed:{accountLink:function(){return"https://www.plurk.com/".concat(this.account)},postedDate:function(){return new Date(this.plurk.posted).toLocaleString()},originLink:function(){return"https://www.plurk.com/p/".concat(this.plurk.plurk_id.toString(36))},responseOpenTitle:function(){return this.responseOpen?"收起回覆":"展開回覆"},timeTag:function(){var t=new Date(this.plurk.posted).toLocaleDateString().split("/").join("-");if(!this.prevPlurk)return t;var e={year:new Date(this.prevPlurk.posted).getFullYear(),month:new Date(this.prevPlurk.posted).getMonth(),date:new Date(this.prevPlurk.posted).getDate()},n={year:new Date(this.plurk.posted).getFullYear(),month:new Date(this.plurk.posted).getMonth(),date:new Date(this.plurk.posted).getDate()};return e.year!==n.year||e.month!==n.month||e.date!==n.date?t:void 0}},components:{responseCard:p["a"]}},v=d,h=(n("c769"),n("2877")),m=Object(h["a"])(v,u,l,!1,null,"69e51bb3",null);m.options.__file="plurk_content.vue";var f=m.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},t._l(t.accountList,function(e,s){return n("div",{key:e,staticClass:"accountText",on:{click:function(n){t.useAccount(e)}}},[t._v(t._s(e)+"\n    "),n("div",{staticClass:"removeAccount",on:{click:function(e){e.stopPropagation(),t.removeAccount(s)}}},[n("div",{staticClass:"remove"})])])}))},k=[],_={props:["currentAccount"],methods:{useAccount:function(t){this.$emit("update:currentAccount",t)},removeAccount:function(t){this.$store.commit("removeAccount",t),0===this.accountList.length&&this.$emit("closeAccountList")}},computed:{accountList:function(){return this.$store.state.accountList.accountList}},created:function(){localStorage.getItem("accountList")&&this.$store.commit("setAccountList",JSON.parse(localStorage.getItem("accountList")))}},L=_,C=(n("f41a"),Object(h["a"])(L,g,k,!1,null,"3f996a4a",null));C.options.__file="accountList.vue";var w=C.exports,b={data:function(){return{account:"",date:"",timeline:[],isLoading:!1,error:"",displayName:"",moreLoading:!1,currentAccount:"",targetAvatar:"",canGetMore:!0,accountListOpen:!1}},methods:{getTimeline:function(){var t=this;this.timeline=[],this.error="",this.canGetMore=!0,this.account&&!this.isLoading&&(this.isLoading=!0,this.$axios.post("https://plurk-timeline.herokuapp.com/getTimeline",{account:this.account,offset:this.isoDate}).then(function(e){"success"===e.data.success?(t.timeline=e.data.plurks,t.displayName=e.data.displayName,t.currentAccount=e.data.account,t.targetAvatar=e.data.avatar,t.timeline.length<1&&(t.error="在這時間之前沒有噗文喔")):t.error=e.data.message,t.isLoading=!1}))},getMoreTimeline:function(){var t=this,e=new Date(this.timeline[this.timeline.length-1].posted).toISOString();this.currentAccount&&!this.moreLoading&&(this.moreLoading=!0,this.$axios.post("https://plurk-timeline.herokuapp.com/getTimeline",{account:this.currentAccount,offset:e}).then(function(e){"success"===e.data.success?(t.timeline=r(t.timeline).concat(r(e.data.plurks)),0===e.data.plurks.length&&(t.canGetMore=!1,t.error="已經沒有更多的噗文囉")):t.error=e.message,t.moreLoading=!1}).catch(function(t){console.log("錯誤:",t)}))},clearError:function(){this.error=""},addToAccountList:function(){var t=this;if(this.accountList.length>0){if(this.accountList.some(function(e){return e===t.account}))return;this.$store.commit("addToAccountList",this.account)}else this.$store.commit("addToAccountList",this.account);localStorage.setItem("accountList",JSON.stringify(this.accountList))},openAccountList:function(){this.accountList.length>0&&(this.accountListOpen=!this.accountListOpen)}},computed:{isoDate:function(){return this.date?new Date("".concat(this.date,"T23:59:59")).toISOString():(new Date).toISOString()},accountList:function(){return this.$store.state.accountList.accountList}},components:{plurkContent:f,accountList:w},created:function(){this.date=(new Date).toLocaleDateString().split("/").map(function(t){return 1*t<10&&(t="0"+t),t}).join("-")}},y=b,x=(n("ac93"),Object(h["a"])(y,s,a,!1,null,"7a28126e",null));x.options.__file="timeline.vue";e["default"]=x.exports},c769:function(t,e,n){"use strict";var s=n("c803"),a=n.n(s);a.a},c803:function(t,e,n){},e339:function(t,e,n){},eee5:function(t,e,n){"use strict";var s=n("1953"),a=n.n(s);a.a},f41a:function(t,e,n){"use strict";var s=n("e339"),a=n.n(s);a.a},fc1a:function(t,e,n){}}]);
//# sourceMappingURL=chunk-7a6b6873.c83bcac5.js.map