(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e664d8e"],{"03c4":function(t,e,n){},"0982":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"response_content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.responseData.avatar,alt:"avatar"}})]),n("div",{staticClass:"article"},[n("div",{staticClass:"displayName"},[n("a",{class:{owner:t.responseData.account===t.ownerAccount},style:t.nameColor,attrs:{href:t.accountLink,target:"_blank"}},[t._v(t._s(t.responseData.displayName))])]),n("div",{staticClass:"text_content",domProps:{innerHTML:t._s(t.responseData.content)}})])]),n("div",{staticClass:"date"},[t._v(t._s(t.postedDate))])])},a=[],i={props:["responseData","ownerAccount"],computed:{accountLink:function(){return"https://www.plurk.com/".concat(this.responseData.account)},postedDate:function(){return new Date(this.responseData.posted).toLocaleString()},nameColor:function(){return this.responseData.nameColor?{color:"#".concat(this.responseData.nameColor)}:void 0}}},o=i,r=(n("eee5"),n("2877")),c=Object(r["a"])(o,s,a,!1,null,"c44a0ada",null);c.options.__file="responseCard.vue";e["a"]=c.exports},"0bfb":function(t,e,n){"use strict";var s=n("cb7c");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1670:function(t,e,n){},"17ff":function(t,e,n){"use strict";var s=n("03c4"),a=n.n(s);a.a},1953:function(t,e,n){},"214f":function(t,e,n){"use strict";var s=n("32e9"),a=n("2aba"),i=n("79e5"),o=n("be13"),r=n("2b4c");t.exports=function(t,e,n){var c=r(t),u=n(o,c,""[t]),l=u[0],p=u[1];i(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(a(String.prototype,t,l),s(RegExp.prototype,c,2==e?function(t,e){return p.call(t,this,e)}:function(t){return p.call(t,this)}))}},2348:function(t,e,n){"use strict";var s=n("86f1"),a=n.n(s);a.a},"28a5":function(t,e,n){n("214f")("split",2,function(t,e,s){"use strict";var a=n("aae3"),i=s,o=[].push,r="split",c="length",u="lastIndex";if("c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[c]||2!="ab"[r](/(?:ab)*/)[c]||4!="."[r](/(.?)(.?)/)[c]||"."[r](/()()/)[c]>1||""[r](/.?/)[c]){var l=void 0===/()??/.exec("")[1];s=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!a(t))return i.call(n,t,e);var s,r,p,d,f,v=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,h=void 0===e?4294967295:e>>>0,k=new RegExp(t.source,g+"g");l||(s=new RegExp("^"+k.source+"$(?!\\s)",g));while(r=k.exec(n)){if(p=r.index+r[0][c],p>m&&(v.push(n.slice(m,r.index)),!l&&r[c]>1&&r[0].replace(s,function(){for(f=1;f<arguments[c]-2;f++)void 0===arguments[f]&&(r[f]=void 0)}),r[c]>1&&r.index<n[c]&&o.apply(v,r.slice(1)),d=r[0][c],m=p,v[c]>=h))break;k[u]===r.index&&k[u]++}return m===n[c]?!d&&k.test("")||v.push(""):v.push(n.slice(m)),v[c]>h?v.slice(0,h):v}}else"0"[r](void 0,0)[c]&&(s=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(n,a){var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i,a):s.call(String(i),n,a)},s]})},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},6178:function(t,e,n){"use strict";var s=n("1670"),a=n.n(s);a.a},"6b54":function(t,e,n){"use strict";n("3846");var s=n("cb7c"),a=n("0bfb"),i=n("9e1e"),o="toString",r=/./[o],c=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?a.call(t):void 0)}):r.name!=o&&c(function(){return r.call(this)})},"86f1":function(t,e,n){},aae3:function(t,e,n){var s=n("d3f4"),a=n("2d95"),i=n("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==a(t))}},ade6:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("div",{staticClass:"data"},[n("div",{staticClass:"input_area"},[n("div",{staticClass:"account"},[n("span",[t._v("帳號 : ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],attrs:{type:"text"},domProps:{value:t.account},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getTimeline(e):null},input:function(e){e.target.composing||(t.account=e.target.value)}}})]),n("div",{staticClass:"date"},[n("span",[t._v("日期 : ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],attrs:{type:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),n("div",{staticClass:"goTimeline",on:{click:t.getTimeline}},[t.isLoading?n("img",{attrs:{src:"/loading.gif"}}):n("span",[t._v("啟動時光機!")])])]),t.timeline.length>0?n("div",{staticClass:"plurkContentGroup"},[t._l(t.timeline,function(e,s){return n("plurkContent",{key:s,staticClass:"plurkContent",attrs:{plurk:e,"display-name":t.displayName,account:t.currentAccount,avatar:t.targetAvatar}})}),this.timeline.length>0&&t.canGetMore?n("div",{staticClass:"more",on:{click:t.getMoreTimeline}},[t.moreLoading?n("img",{attrs:{src:"/loading.gif"}}):n("span",[t._v("看更多")])]):t._e()],2):t._e(),t.error?n("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e()])},a=[];n("28a5");function i(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return i(t)||o(t)||r()}n("cadf"),n("551c"),n("097d");var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content_card",on:{click:t.goResponsePage}},[n("div",{staticClass:"main_content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.avatar,alt:"avatar"}})]),n("div",{staticClass:"article"},[n("div",{staticClass:"displayName"},[n("a",{attrs:{href:t.accountLink,target:"_blank"}},[t._v(t._s(t.displayName))])]),n("div",{staticClass:"text_content",domProps:{innerHTML:t._s(t.plurk.content)}})])]),n("div",{staticClass:"date"},[t._v(t._s(t.postedDate))]),n("div",{staticClass:"info"},[n("div",{staticClass:"response_count",attrs:{title:t.responseOpenTitle},on:{click:function(e){return e.stopPropagation(),t.getResponse(e)}}},[n("i",{staticClass:"fas fa-comments"}),n("div",{staticClass:"count"},[t._v("\n          "+t._s(t.plurk.response_count)+"\n        ")])]),n("a",{staticClass:"link",attrs:{href:t.originLink,target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[n("i",{staticClass:"fas fa-external-link-alt"}),n("div",{staticClass:"text"},[t._v("連結")])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.responseOpen,expression:"responseOpen"}],staticClass:"response_group"},[t._l(t.responses,function(e){return n("responseCard",{directives:[{name:"show",rawName:"v-show",value:!t.responseLoading,expression:"!responseLoading"}],key:e.posted,attrs:{"response-data":e,ownerAccount:t.account}})}),t.responseLoading?n("div",{staticClass:"loading"},[n("img",{attrs:{src:"/ball-loading.gif"}})]):t._e()],2),n("div",{directives:[{name:"show",rawName:"v-show",value:t.responseOpen&&!t.responseLoading,expression:"responseOpen && !responseLoading"}],staticClass:"close",on:{click:function(e){t.openCloseResponse(!1)}}},[t._v("收起回覆")])])},l=[],p=(n("6b54"),n("0982")),d={props:["plurk","displayName","account","avatar"],data:function(){return{responseLoading:!1,responseOpen:!1,responses:[]}},methods:{getResponse:function(){var t=this;!this.responses.length>0&&this.plurk.response_count>0?(this.responseOpen=!0,this.responseLoading=!0,this.$axios.post("https://plurk-timeline.herokuapp.com/response",{plurk_id:this.plurk.plurk_id}).then(function(e){t.responses=e.data.response,t.responseLoading=!1})):this.responses.length>0&&this.plurk.response_count>0&&(this.responseOpen=!this.responseOpen)},openCloseResponse:function(t){this.responseOpen=t},goResponsePage:function(){this.$store.commit("setPlurkPageData",{plurk:this.plurk,displayName:this.displayName,account:this.account,avatar:this.avatar}),this.$router.push("/response")}},computed:{accountLink:function(){return"https://www.plurk.com/".concat(this.account)},postedDate:function(){return new Date(this.plurk.posted).toLocaleString()},originLink:function(){return"https://www.plurk.com/p/".concat(this.plurk.plurk_id.toString(36))},responseOpenTitle:function(){return this.responseOpen?"收起回覆":"展開回覆"}},components:{responseCard:p["a"]}},f=d,v=(n("17ff"),n("2348"),n("2877")),g=Object(v["a"])(f,u,l,!1,null,"5980bfa2",null);g.options.__file="plurk_content.vue";var m=g.exports,h={data:function(){return{account:"",date:"",timeline:[],isLoading:!1,error:"",displayName:"",moreLoading:!1,currentAccount:"",targetAvatar:"",canGetMore:!0}},methods:{getTimeline:function(){var t=this;this.timeline=[],this.error="",this.canGetMore=!0,this.account&&!this.isLoading&&(this.isLoading=!0,this.$axios.post("https://plurk-timeline.herokuapp.com/getTimeline",{account:this.account,offset:this.isoDate}).then(function(e){"success"===e.data.success?(t.timeline=e.data.plurks,t.displayName=e.data.displayName,t.currentAccount=e.data.account,t.targetAvatar=e.data.avatar,t.timeline.length<1&&(t.error="在這時間之前沒有噗文喔")):t.error=e.data.message,t.isLoading=!1}))},getMoreTimeline:function(){var t=this,e=new Date(this.timeline[this.timeline.length-1].posted).toISOString();this.currentAccount&&!this.moreLoading&&(this.moreLoading=!0,this.$axios.post("https://plurk-timeline.herokuapp.com/getTimeline",{account:this.currentAccount,offset:e}).then(function(e){"success"===e.data.success?(t.timeline=c(t.timeline).concat(c(e.data.plurks)),0===e.data.plurks.length&&(t.canGetMore=!1,t.error="已經沒有更多的噗文囉")):t.error=e.message,t.moreLoading=!1}).catch(function(t){console.log("錯誤:",t)}))},clearError:function(){this.error=""}},computed:{isoDate:function(){return this.date?new Date("".concat(this.date,"T23:59:59")).toISOString():(new Date).toISOString()}},components:{plurkContent:m},created:function(){this.date=(new Date).toLocaleDateString().split("/").map(function(t){return 1*t<10&&(t="0"+t),t}).join("-")}},k=h,_=(n("6178"),Object(v["a"])(k,s,a,!1,null,"51f5558b",null));_.options.__file="timeline.vue";e["default"]=_.exports},eee5:function(t,e,n){"use strict";var s=n("1953"),a=n.n(s);a.a}}]);
//# sourceMappingURL=chunk-4e664d8e.119ce70c.js.map